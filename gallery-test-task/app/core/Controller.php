<?php//// Базовый класс контроллера.//abstract class Controller{		function __construct()	{			}		public function Request($action)	{		$this->before();		if(method_exists($this,$action))		{			$this->$action();		}		else		{			Route::ErrorPage404();		}		$this->after();	}		//	// Действия до вывода.	//	protected function before()	{	}		//	// Действия после вывода.	//		protected function after()	{	}		//	// Запрос произведен методом GET?	//	protected function IsGet()	{		return $_SERVER['REQUEST_METHOD'] == 'GET';	}	//	// Запрос произведен методом POST?	//	protected function IsPost()	{		return $_SERVER['REQUEST_METHOD'] == 'POST';	}	//	// Генерация HTML шаблона в строку.	//	protected function View($fileName, $vars = array())	{		// Установка переменных для шаблона.		foreach ($vars as $k => $v)		{ 			$$k = $v;		}		// Кодировка		header('Content-type: text/html; charset=utf-8');		// Генерация HTML в строку.		ob_start();		include $fileName;		return ob_get_clean();		}	function preparation($v,$t) {		if ($t == 'string')	{			$v = trim($v);			$v = strip_tags($v);			$v = htmlspecialchars($v);			$v = mysql_escape_string($v);		}		if ($t == 'number')	{			$v = intval($v);		}		return $v;	}}